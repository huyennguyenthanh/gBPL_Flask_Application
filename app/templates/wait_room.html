<body>
    Waiting for other user .....

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.2.0/socket.io.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script>
        var socket;
        $(document).ready(function(){
            socket = io.connect('http://' + document.domain + ':' + location.port + '/wait' );
            console.log('http://' + document.domain + ':' + location.port + '/wait' )
            
            socket.on('connect', function() {
                connected = true;
                // socket.emit('join', {});
            });
            socket.on('disconnect', () => {
                connected = false;
            });

            socket.on('go_to_chat', () => {
                socket.disconnect();
                socket = io.connect('http://' + document.domain + ':' + location.port + '/chat' );
                socket.emit('join', {})
                window.location.href = "{{ url_for('chat') }}";
            });
            socket.on('go_to_home', () => {
                socket.disconnect();
                window.location.href = "{{ url_for('home') }}";
            });
        });

    </script>
</body>